<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Menú Alumno</title>
  <link rel="stylesheet" href="menu.css" />
</head>
<body>
  <!-- Encabezado -->
  <header class="menu-encabezado">
    <img src="img/logo.png" alt="Logo" class="logo" />
    <h1>Panel del Alumno</h1>
  </header>

  <!-- Barra de botones del alumno -->
  <nav class="barra-botones">
    <a href="menu-alumno.html">🏠 Inicio</a>
    <a href="#">📅 Horario</a>
    <a href="mis_reportes.html">📝 Reportes</a>
    <a class="disabled">🎓 Calificaciones</a>
    <a class="disabled">💬 Mensajes</a>
    <a class="disabled">🔒 Próximamente</a>
    <a class="disabled">🔒 Próximamente</a>
    <a href="#" onclick="cerrarSesion()">🚪 Cerrar sesión</a>
  </nav>

  <!-- Contenido principal -->
  <main class="contenido-menu">
    <p id="saludo"></p>
    <section id="reportes-conducta">
        <h2>📋 Mis Reportes de Conducta</h2>
        <table>
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Clase</th>
              <th>Hora</th>
              <th>Descripción</th>
            </tr>
          </thead>
          <tbody id="tabla-reportes">
            <!-- Aquí se insertarán los reportes -->
          </tbody>
        </table>
    </section>
  </main>

  <!-- Pie de página -->
  <footer class="pie">
    © Escuela Secundaria No. 77 “República de Panamá”. Academia de Tecnologías
  </footer>

  <script>
    const alumno = JSON.parse(localStorage.getItem("usuarioActual") || "{}");
    const matricula = alumno.usuario;
  
    fetch(`https://pagina-oficial-amhj.onrender.com/api/reportes/alumno/${matricula}`)
      .then(res => res.json())
      .then(data => {
        const tabla = document.getElementById("tabla-reportes");
  
        if (!data || data.length === 0) {
          tabla.innerHTML = `<tr><td colspan="4">No hay reportes</td></tr>`;
          return;
        }
  
        data.forEach(reporte => {
          const fila = `
            <tr>
              <td>${reporte.fecha}</td>
              <td>${reporte.clase}</td>
              <td>${reporte.hora}</td>
              <td>${reporte.contenido}</td>
            </tr>
          `;
          tabla.innerHTML += fila;
        });
      })
      .catch(err => {
        console.error("Error al cargar reportes:", err);
      });
  </script>
  
</body>
</html>